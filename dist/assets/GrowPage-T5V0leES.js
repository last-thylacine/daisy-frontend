import{c as o,C as T,i as v,a as u,b as _,S as z,e as D,t as d,R as b,s as g,f as G,g as X,o as Y,h as W,j as A,u as F,F as Z,d as B}from"./index-B9adGmDy.js";import{a as p,f as J,d as K}from"./app-DuZg9-Er.js";import{a as V,D as N,c as O}from"./Drawer-BkBdrHQZ.js";const Q="/assets/energy_19.02x24-BJ5CZXmv.png",ee="_chip_10qn9_1",te={chip:ee},I=n=>o(T,{get class(){return te.chip},get children(){return n.children}}),re="_bar_jc2oq_1",ne="_progress_jc2oq_1",ae="_blue_jc2oq_11",ie="_yellow_jc2oq_14",le="_children_jc2oq_25",x={bar:re,progress:ne,blue:ae,yellow:ie,children:le};var oe=d("<div>"),se=d("<div><div>");const S=n=>{const a=()=>{const i=n.max-n.min,e=n.value-n.min;return Math.floor(100*e/i)};return(()=>{var i=se(),e=i.firstChild;return v(i,o(z,{get when(){return n.children},get children(){var t=oe();return v(t,()=>n.children),u(()=>_(t,x.children)),t}}),null),u(t=>{var l={[x.bar]:!0,[x[n.variant]]:!0},s=`${a()}%`,m={[x.progress]:!0,[x[n.variant]]:!0};return t.e=D(i,l,t.e),s!==t.t&&((t.t=s)!=null?e.style.setProperty("width",s):e.style.removeProperty("width")),t.a=D(e,m,t.a),t},{e:void 0,t:void 0,a:void 0}),i})()},ce="_container_1ijse_1",ue="_row_1ijse_10",de="_energy_1ijse_16",_e="_username_1ijse_16",ve="_avatar_1ijse_25",$={container:ce,row:ue,energy:de,username:_e,avatar:ve};var ge=d("<img draggable=false width=19.02 height=24>"),me=d("<div>/"),L=d("<div>");const he=()=>{const{store:n}=p,a=()=>n.energy!==null&&n.water_power!==null,i=()=>500*(1+n.water_power);return o(b,{get class(){return $.container},get children(){return[o(I,{get children(){return o(z,{get when(){return a()},get children(){return[o(b,{get class(){return $.row},get children(){return[(()=>{var e=ge();return g(e,"src",Q),e})(),(()=>{var e=me(),t=e.firstChild;return v(e,()=>n.energy,t),v(e,i,null),u(()=>_(e,$.energy)),e})()]}}),o(S,{min:0,get value(){return n.energy},get max(){return i()},variant:"blue",children:"2h"})]}})}}),o(I,{get children(){return o(z,{get when(){return a()},get children(){return[o(b,{get class(){return $.row},get children(){return[(()=>{var e=L();return v(e,()=>{var t;return(t=n.initData.user)==null?void 0:t.username}),u(()=>_(e,$.username)),e})(),(()=>{var e=L();return u(()=>_(e,$.avatar)),e})()]}}),o(S,{min:0,value:0,max:100,variant:"yellow",children:"lvl 1/12"})]}})}})]}})};function fe(n,{ease:a=e=>e,duration:i=100}){const[e,t]=G(n());let l,s,m,r;function c(f){const h=f-l;h<i?(t(s+a(h/i)*m),r=requestAnimationFrame(c)):t(n())}return X(Y(n,()=>{l=performance.now(),s=e(),m=n()-s,r=requestAnimationFrame(c),W(()=>cancelAnimationFrame(r))},{defer:!0})),e}const $e=()=>{const{store:n}=p,a=fe(()=>n.coins||0,{duration:250}),i=()=>Math.round(a());return{formattedCoinBalance:()=>J(i()),coinBalanceFontSize:()=>`${56-2*Math.log10(n.coins||1)}px`}},we="/assets/dz_64x64_3x-DKj55EYD.png",be="_container_16o4z_1",pe="_text_16o4z_10",E={container:be,text:pe};var Ce=d("<img draggable=false width=64 height=64>"),xe=d("<div>");const ye=()=>{const{formattedCoinBalance:n,coinBalanceFontSize:a}=$e();return o(b,{get class(){return E.container},get children(){return[(()=>{var i=Ce();return g(i,"src",we),i})(),(()=>{var i=xe();return v(i,n),u(e=>{var t=E.text,l=a();return t!==e.e&&_(i,e.e=t),l!==e.t&&((e.t=l)!=null?i.style.setProperty("font-size",l):i.style.removeProperty("font-size")),e},{e:void 0,t:void 0}),i})()]}})},qe="data:image/svg+xml,%3csvg%20width='280'%20height='281'%20viewBox='0%200%20280%20281'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M171.411%20213.83C194.798%20295.994%20125.002%20306.287%20129.41%20218.549C108.104%20304.082%2041.9824%20273.201%2091.941%20201.829C30.2274%20265.113%20-14.5887%20209.234%2068.2457%20169.653C-22.6703%20189.381%20-21.2009%20121.004%2063.4161%20128.355C-23.405%20104.093%202.30917%2044.5373%2079.0779%2091.5925C19.9417%2025.4207%2067.8202%20-8.21643%20111.043%2066.5939C89.7372%20-22.3707%20156.594%20-20.1658%20151.451%2061.2743C174.227%20-17.9601%20235.94%201.15741%20189.917%2076.8875C246.961%2017.333%20291.042%2068.8007%20215.554%20110.586C298.389%2087.182%20302.797%20154.09%20220.491%20151.148C302.797%20169.653%20275.614%20234.968%20204.149%20189.381C260.92%20250.408%20215.554%20287.906%20171.411%20213.83Z'%20fill='white'/%3e%3ccircle%20cx='140.787'%20cy='140.803'%20r='28.3146'%20fill='%23FFD600'/%3e%3c/svg%3e",ze="_daisy_1078s_1",Fe="_particle_1078s_14",j={daisy:ze,particle:Fe,"float-and-fade":"_float-and-fade_1078s_1","particle-text":"_particle-text_1078s_21"};var je=d("<img draggable=false width=280 height=280>");const P=(n,a,i)=>{const e=document.createElement("div");e.classList.add(j["particle-text"]),e.textContent=`+${i}`;const t=document.createElement("div");t.classList.add(j.particle),t.style.position="absolute",t.style.left=`${n}px`,t.style.top=`${a}px`,t.addEventListener("animationend",t.remove),t.appendChild(e),document.body.appendChild(t)},De=()=>{const{store:n,tap:a}=p,i=t=>{n.multi_flower&&(P(t.clientX,t.clientY,n.multi_flower),a())},e=t=>{if(t.preventDefault(),n.multi_flower){for(const l of t.changedTouches)P(l.clientX,l.clientY,n.multi_flower);a()}};return(()=>{var t=je();return t.$$touchend=e,t.$$mouseup=i,g(t,"src",qe),u(()=>_(t,j.daisy)),t})()};A(["mouseup","touchend"]);const Be="/assets/farm_48x46.76_3x-PHbG5kdH.png",Ie="/assets/farm_82.13x80_3x-DUl_NfRy.png",Se="_container_tuiez_1",Le="_textContainer_tuiez_13",Ee="_title_tuiez_18",Pe="_subtitle_tuiez_27",ke="_chevronLabel_tuiez_36",y={container:Se,textContainer:Le,title:Ee,subtitle:Pe,chevronLabel:ke};var Me=d("<img draggable=false>"),Ue=d("<div><div></div><div> lvl"),k=d("<img draggable=false width=24 height=24>"),He=d("<div>");const Re=n=>{const{store:a}=p,i=()=>a.upgrades.find(({id:l})=>l===n.id),e=()=>{if(n.id==="multi_flower")return a.multi_flower;if(n.id==="water_power")return a.water_power},t=F();return o(b,{get class(){return y.container},onClick:()=>t(`/grow/farm/${i().id}`),get children(){return[(()=>{var l=Me();return u(s=>{var m=i().iconWidth,r=i().iconHeight,c=i().icon;return m!==s.e&&g(l,"width",s.e=m),r!==s.t&&g(l,"height",s.t=r),c!==s.a&&g(l,"src",s.a=c),s},{e:void 0,t:void 0,a:void 0}),l})(),(()=>{var l=Ue(),s=l.firstChild,m=s.nextSibling,r=m.firstChild;return v(s,()=>i().title),v(m,e,r),u(c=>{var f=y.textContainer,h=y.title,C=y.subtitle;return f!==c.e&&_(l,c.e=f),h!==c.t&&_(s,c.t=h),C!==c.a&&_(m,c.a=C),c},{e:void 0,t:void 0,a:void 0}),l})(),(()=>{var l=k();return g(l,"src",K),l})(),(()=>{var l=He();return v(l,()=>i().cost(e())),u(()=>_(l,y.chevronLabel)),l})(),(()=>{var l=k();return g(l,"src",V),l})()]}})},Te="_title_1ji7f_1",Ae="_subtitle_1ji7f_11",M={title:Te,subtitle:Ae};var Ne=d("<img draggable=false width=82.13 height=80>"),U=d("<div>");const H={title:"Farm",subtitle:"How a farm works"},Ge=()=>{const{store:n}=p;return[(()=>{var a=Ne();return g(a,"src",Ie),a})(),(()=>{var a=U();return v(a,()=>H.title),u(()=>_(a,M.title)),a})(),(()=>{var a=U();return v(a,()=>H.subtitle),u(()=>_(a,M.subtitle)),a})(),o(Z,{get each(){return n.upgrades},children:a=>o(Re,{get id(){return a.id}})})]},Xe=()=>{const n=F();return o(N,{onClose:()=>n("/grow"),get children(){return o(Ge,{})}})},Ye="_title_ftqiv_1",We="_description_ftqiv_11",Ze="_effect_ftqiv_21",Je="_cost_ftqiv_31",Ke="_level_ftqiv_41",Ve="_button_ftqiv_51",w={title:Ye,description:We,effect:Ze,cost:Je,level:Ke,button:Ve};var Oe=d("<img draggable=false>"),q=d("<div>"),Qe=d("<img draggable=false width=40 height=40>"),et=d("<div> lvl");const tt={submit:"Go ahead"},rt=n=>{const{store:a,setStore:i}=p,e=()=>a.upgrades.find(({id:r})=>r===n.id),t=F(),l=()=>{if(n.id==="multi_flower")return a.multi_flower;if(n.id==="water_power")return a.water_power},s=()=>t("/grow/farm/"),m=()=>{n.id==="multi_flower"&&a.multi_flower!==null&&a.coins!==null&&(i("coins",r=>r-e().cost(l())),i("multi_flower",r=>r+1),s()),n.id==="water_power"&&a.water_power!==null&&a.coins!==null&&(i("coins",r=>r-e().cost(l())),i("water_power",r=>r+1),s())};return o(N,{onClose:s,get children(){return[(()=>{var r=Oe();return u(c=>{var f=e().imageWidth,h=e().imageHeight,C=e().image;return f!==c.e&&g(r,"width",c.e=f),h!==c.t&&g(r,"height",c.t=h),C!==c.a&&g(r,"src",c.a=C),c},{e:void 0,t:void 0,a:void 0}),r})(),(()=>{var r=q();return v(r,()=>e().title),u(()=>_(r,w.title)),r})(),(()=>{var r=q();return v(r,()=>e().description),u(()=>_(r,w.description)),r})(),(()=>{var r=q();return v(r,()=>e().effect.replace("{{level}}",String(l()))),u(()=>_(r,w.effect)),r})(),o(b,{get children(){return[(()=>{var r=Qe();return g(r,"src",O),r})(),(()=>{var r=q();return v(r,()=>e().cost(l())),u(()=>_(r,w.cost)),r})(),(()=>{var r=et(),c=r.firstChild;return v(r,()=>l()+1,c),u(()=>_(r,w.level)),r})()]}}),(()=>{var r=q();return r.$$click=m,v(r,()=>tt.submit),u(()=>_(r,w.button)),r})()]}})};A(["click"]);const nt="_button_1mduq_1",at="_label_1mduq_11",R={button:nt,label:at};var it=d("<img draggable=false width=48 height=46.76>"),lt=d("<div>");const ot={label:"Farm"},st=()=>{const n=F(),a=()=>n("/grow/farm"),i=B(()=>"//grow/farm"),e=B(()=>"//grow/farm/:upgrade_id");return[o(T,{get class(){return R.button},onClick:a,get children(){return[(()=>{var t=it();return g(t,"src",Be),t})(),(()=>{var t=lt();return v(t,()=>ot.label),u(()=>_(t,R.label)),t})()]}}),o(z,{get when(){return!!i()},get children(){return o(Xe,{})}}),o(z,{get when(){return!!e()},get children(){return o(rt,{get id(){return e().params.upgrade_id}})}})]},_t=()=>[o(he,{}),o(ye,{}),o(De,{}),o(st,{})];export{_t as default};
