import{c as i,C as T,a as d,e as z,t as u,S as F,R as b,s as g,i as v,b as _,f as X,g as G,o as Y,h as W,j as A,u as D,F as Z,d as I}from"./index-Hm4gzCkY.js";import{a as p,f as J,d as K}from"./app-NisVcxqK.js";import{c as V,D as N}from"./Drawer-DgaXo9xu.js";const O="/daisy-frontend/assets/energy_19.02x24-BJ5CZXmv.png",Q="_chip_10qn9_1",ee={chip:Q},S=n=>i(T,{get class(){return ee.chip},get children(){return n.children}}),te="_bar_ysrb2_1",re="_progress_ysrb2_1",ne="_blue_ysrb2_10",ae="_yellow_ysrb2_13",q={bar:te,progress:re,blue:ne,yellow:ae};var se=u("<div><div>");const j=n=>{const a=()=>{const s=n.max-n.min,e=n.value-n.min;return Math.floor(100*e/s)};return(()=>{var s=se(),e=s.firstChild;return d(r=>{var o={[q.bar]:!0,[q[n.variant]]:!0},l=`${a()}%`,m={[q.progress]:!0,[q[n.variant]]:!0};return r.e=z(s,o,r.e),l!==r.t&&((r.t=l)!=null?e.style.setProperty("width",l):e.style.removeProperty("width")),r.a=z(e,m,r.a),r},{e:void 0,t:void 0,a:void 0}),s})()},oe="_container_1ijse_1",ie="_row_1ijse_10",le="_energy_1ijse_16",ce="_username_1ijse_16",de="_avatar_1ijse_25",w={container:oe,row:ie,energy:le,username:ce,avatar:de};var ue=u("<img draggable=false width=19.02 height=24>"),_e=u("<div>/"),L=u("<div>");const ve=()=>{const{store:n}=p,a=()=>n.energy!==null&&n.water_power!==null,s=()=>500*(1+n.water_power);return i(b,{get class(){return w.container},get children(){return[i(S,{get children(){return i(F,{get when(){return a()},get children(){return[i(b,{get class(){return w.row},get children(){return[(()=>{var e=ue();return g(e,"src",O),e})(),(()=>{var e=_e(),r=e.firstChild;return v(e,()=>n.energy,r),v(e,s,null),d(()=>_(e,w.energy)),e})()]}}),i(j,{min:0,get value(){return n.energy},get max(){return s()},variant:"blue"})]}})}}),i(S,{get children(){return i(F,{get when(){return a()},get children(){return[i(b,{get class(){return w.row},get children(){return[(()=>{var e=L();return v(e,()=>{var r;return(r=n.initData.user)==null?void 0:r.username}),d(()=>_(e,w.username)),e})(),(()=>{var e=L();return d(()=>_(e,w.avatar)),e})()]}}),i(j,{min:1,value:1,max:12,variant:"yellow"})]}})}})]}})};function ge(n,{ease:a=e=>e,duration:s=100}){const[e,r]=X(n());let o,l,m,t;function c(h){const f=h-o;f<s?(r(l+a(f/s)*m),t=requestAnimationFrame(c)):r(n())}return G(Y(n,()=>{o=performance.now(),l=e(),m=n()-l,t=requestAnimationFrame(c),W(()=>cancelAnimationFrame(t))},{defer:!0})),e}const me=()=>{const{store:n}=p,a=ge(()=>n.coins||0,{duration:250}),s=()=>Math.round(a());return{formattedCoinBalance:()=>J(s()),coinBalanceFontSize:()=>`${56-2*Math.log10(n.coins||1)}px`}},fe="/daisy-frontend/assets/dz_64x64_3x-DKj55EYD.png",he="_container_16o4z_1",we="_text_16o4z_10",E={container:he,text:we};var $e=u("<img draggable=false width=64 height=64>"),be=u("<div>");const pe=()=>{const{formattedCoinBalance:n,coinBalanceFontSize:a}=me();return i(b,{get class(){return E.container},get children(){return[(()=>{var s=$e();return g(s,"src",fe),s})(),(()=>{var s=be();return v(s,n),d(e=>{var r=E.text,o=a();return r!==e.e&&_(s,e.e=r),o!==e.t&&((e.t=o)!=null?s.style.setProperty("font-size",o):s.style.removeProperty("font-size")),e},{e:void 0,t:void 0}),s})()]}})},ye="data:image/svg+xml,%3csvg%20width='280'%20height='281'%20viewBox='0%200%20280%20281'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M171.411%20213.83C194.798%20295.994%20125.002%20306.287%20129.41%20218.549C108.104%20304.082%2041.9824%20273.201%2091.941%20201.829C30.2274%20265.113%20-14.5887%20209.234%2068.2457%20169.653C-22.6703%20189.381%20-21.2009%20121.004%2063.4161%20128.355C-23.405%20104.093%202.30917%2044.5373%2079.0779%2091.5925C19.9417%2025.4207%2067.8202%20-8.21643%20111.043%2066.5939C89.7372%20-22.3707%20156.594%20-20.1658%20151.451%2061.2743C174.227%20-17.9601%20235.94%201.15741%20189.917%2076.8875C246.961%2017.333%20291.042%2068.8007%20215.554%20110.586C298.389%2087.182%20302.797%20154.09%20220.491%20151.148C302.797%20169.653%20275.614%20234.968%20204.149%20189.381C260.92%20250.408%20215.554%20287.906%20171.411%20213.83Z'%20fill='white'/%3e%3ccircle%20cx='140.787'%20cy='140.803'%20r='28.3146'%20fill='%23FFD600'/%3e%3c/svg%3e",Ce="_daisy_1078s_1",xe="_particle_1078s_14",B={daisy:Ce,particle:xe,"float-and-fade":"_float-and-fade_1078s_1","particle-text":"_particle-text_1078s_21"};var qe=u("<img draggable=false width=280 height=280>");const P=(n,a,s)=>{const e=document.createElement("div");e.classList.add(B["particle-text"]),e.textContent=`+${s}`;const r=document.createElement("div");r.classList.add(B.particle),r.style.position="absolute",r.style.left=`${n}px`,r.style.top=`${a}px`,r.addEventListener("animationend",r.remove),r.appendChild(e),document.body.appendChild(r)},Fe=()=>{const{store:n,tap:a}=p,s=r=>{n.multi_flower&&(P(r.clientX,r.clientY,n.multi_flower),a())},e=r=>{if(r.preventDefault(),n.multi_flower){for(const o of r.changedTouches)P(o.clientX,o.clientY,n.multi_flower);a()}};return(()=>{var r=qe();return r.$$touchend=e,r.$$mouseup=s,g(r,"src",ye),d(()=>_(r,B.daisy)),r})()};A(["mouseup","touchend"]);const De="/daisy-frontend/assets/farm_48x46.76_3x-PHbG5kdH.png",Be="/daisy-frontend/assets/farm_82.13x80_3x-DUl_NfRy.png",ze="_container_mq5wa_1",Ie="_textContainer_mq5wa_13",Se="_title_mq5wa_18",je="_subtitle_mq5wa_27",Le="_chevronLabel_mq5wa_36",C={container:ze,textContainer:Ie,title:Se,subtitle:je,chevronLabel:Le};var Ee=u("<img draggable=false>"),Pe=u("<div><div></div><div> lvl"),k=u("<img draggable=false width=24 height=24>"),ke=u("<div>");const Me=n=>{const{store:a}=p,s=()=>a.upgrades.find(({id:o})=>o===n.id),e=()=>{if(n.id==="multi_flower")return a.multi_flower;if(n.id==="water_power")return a.water_power},r=D();return i(b,{get class(){return C.container},onClick:()=>r(`/grow/farm/${s().id}`),get children(){return[(()=>{var o=Ee();return d(l=>{var m=s().iconWidth,t=s().iconHeight,c=s().icon;return m!==l.e&&g(o,"width",l.e=m),t!==l.t&&g(o,"height",l.t=t),c!==l.a&&g(o,"src",l.a=c),l},{e:void 0,t:void 0,a:void 0}),o})(),(()=>{var o=Pe(),l=o.firstChild,m=l.nextSibling,t=m.firstChild;return v(l,()=>s().title),v(m,e,t),d(c=>{var h=C.textContainer,f=C.title,y=C.subtitle;return h!==c.e&&_(o,c.e=h),f!==c.t&&_(l,c.t=f),y!==c.a&&_(m,c.a=y),c},{e:void 0,t:void 0,a:void 0}),o})(),(()=>{var o=k();return g(o,"src",K),o})(),(()=>{var o=ke();return v(o,()=>s().cost(e())),d(()=>_(o,C.chevronLabel)),o})(),(()=>{var o=k();return g(o,"src",V),o})()]}})},Ue="_title_1ji7f_1",He="_subtitle_1ji7f_11",M={title:Ue,subtitle:He};var Re=u("<img draggable=false width=82.13 height=80>"),U=u("<div>");const H={title:"Farm",subtitle:"How a farm works"},Te=()=>{const{store:n}=p;return[(()=>{var a=Re();return g(a,"src",Be),a})(),(()=>{var a=U();return v(a,()=>H.title),d(()=>_(a,M.title)),a})(),(()=>{var a=U();return v(a,()=>H.subtitle),d(()=>_(a,M.subtitle)),a})(),i(Z,{get each(){return n.upgrades},children:a=>i(Me,{get id(){return a.id}})})]},Ae=()=>{const n=D();return i(N,{onClose:()=>n("/grow"),get children(){return i(Te,{})}})},Ne="/daisy-frontend/assets/dz_32x32_3x-CfX2yuM1.png",Xe="_title_ftqiv_1",Ge="_description_ftqiv_11",Ye="_effect_ftqiv_21",We="_cost_ftqiv_31",Ze="_level_ftqiv_41",Je="_button_ftqiv_51",$={title:Xe,description:Ge,effect:Ye,cost:We,level:Ze,button:Je};var Ke=u("<img draggable=false>"),x=u("<div>"),Ve=u("<img draggable=false width=40 height=40>"),Oe=u("<div> lvl");const Qe={submit:"Go ahead"},et=n=>{const{store:a,setStore:s}=p,e=()=>a.upgrades.find(({id:t})=>t===n.id),r=D(),o=()=>{if(n.id==="multi_flower")return a.multi_flower;if(n.id==="water_power")return a.water_power},l=()=>r("/grow/farm/"),m=()=>{n.id==="multi_flower"&&a.multi_flower!==null&&a.coins!==null&&(s("coins",t=>t-e().cost(o())),s("multi_flower",t=>t+1),l()),n.id==="water_power"&&a.water_power!==null&&a.coins!==null&&(s("coins",t=>t-e().cost(o())),s("water_power",t=>t+1),l())};return i(N,{onClose:l,get children(){return[(()=>{var t=Ke();return d(c=>{var h=e().imageWidth,f=e().imageHeight,y=e().image;return h!==c.e&&g(t,"width",c.e=h),f!==c.t&&g(t,"height",c.t=f),y!==c.a&&g(t,"src",c.a=y),c},{e:void 0,t:void 0,a:void 0}),t})(),(()=>{var t=x();return v(t,()=>e().title),d(()=>_(t,$.title)),t})(),(()=>{var t=x();return v(t,()=>e().description),d(()=>_(t,$.description)),t})(),(()=>{var t=x();return v(t,()=>e().effect.replace("{{level}}",String(o()))),d(()=>_(t,$.effect)),t})(),i(b,{get children(){return[(()=>{var t=Ve();return g(t,"src",Ne),t})(),(()=>{var t=x();return v(t,()=>e().cost(o())),d(()=>_(t,$.cost)),t})(),(()=>{var t=Oe(),c=t.firstChild;return v(t,()=>o()+1,c),d(()=>_(t,$.level)),t})()]}}),(()=>{var t=x();return t.$$click=m,v(t,()=>Qe.submit),d(()=>_(t,$.button)),t})()]}})};A(["click"]);const tt="_button_1mduq_1",rt="_label_1mduq_11",R={button:tt,label:rt};var nt=u("<img draggable=false width=48 height=46.76>"),at=u("<div>");const st={label:"Farm"},ot=()=>{const n=D(),a=()=>n("/grow/farm"),s=I(()=>"/daisy-frontend/grow/farm"),e=I(()=>"/daisy-frontend/grow/farm/:upgrade_id");return[i(T,{get class(){return R.button},onClick:a,get children(){return[(()=>{var r=nt();return g(r,"src",De),r})(),(()=>{var r=at();return v(r,()=>st.label),d(()=>_(r,R.label)),r})()]}}),i(F,{get when(){return!!s()},get children(){return i(Ae,{})}}),i(F,{get when(){return!!e()},get children(){return i(et,{get id(){return e().params.upgrade_id}})}})]},dt=()=>[i(ve,{}),i(pe,{}),i(Fe,{}),i(ot,{})];export{dt as default};
